#!/usr/bin/env bash

set -o nounset -o pipefail -o errexit

clean() {
  rm -rf "${HOME}/.vim/"
  rm -rf "${HOME}/.viminfo"
}

install() {
  curl -q -sSL --max-time 30 -o "${HOME}/.vim/autoload/plug.vim" --create-dirs "https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim"

  echo '{
  "languageserver": {
    "go": {
      "command": "gopls",
      "filetypes": ["go"]
    },
    "python": {
      "command": "pyls",
      "rootPatterns": ["go.mod"],
      "filetypes": ["python"]
    },
    "javascript": {
      "command": "javascript-typescript-stdio",
      "filetypes": ["javascript", "javascriptreact"]
    },
    "terraform": {
      "command": "terraform-lsp",
      "filetypes": ["terraform"]
    }
  }
}' >"${HOME}/.vim/coc-settings.json"
}
